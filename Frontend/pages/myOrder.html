<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Readify - ƒê∆°n h√†ng g·∫ßn ƒë√¢y</title>
  <link rel="shortcut icon" href="assets/images/logo.svg" type="image/svg+xml">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="./assets/css/my_order.css" rel="stylesheet" />
  <link rel="stylesheet" href="./assets/css/header-fix.css">
  <link
    href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Montserrat:wght@300;400;500;600;700&family=Pacifico&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css">
  <script src="https://cdn.tailwindcss.com/3.4.16"></script>
  <script src="../assets/js/callHeaderFooter.js"></script>
  <script src="../assets/js/auth.js"></script>
  <script src="../assets/js/api.js"></script>
  <script src="../assets/js/myOrder.js"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#f5f5dc',
            secondary: '#e6e6e6',
            primarynavy: '#2d5aa0'
          },
          borderRadius: {
            'none': '0px',
            'sm': '4px',
            DEFAULT: '8px',
            'md': '12px',
            'lg': '16px',
            'xl': '20px',
            '2xl': '24px',
            '3xl': '32px',
            'full': '9999px',
            'button': '8px'
          }
        }
      }
    }
  </script>
</head>

<body>
  <div id="header-placeholder"></div>
  <div class="min-h-screen bg-light">
    <main class="my-container main-content">
      <h1>ƒê∆°n h√†ng g·∫ßn ƒë√¢y</h1>
      <div class="table-wrapper">
        <table class="order-table">
          <thead>
            <tr>
              <th></th>
              <th>M√£ ƒê∆°n</th>
              <th>S√°ch</th>
              <th>Ng√†y ƒë·∫∑t</th>
              <th>Tr·∫°ng th√°i</th>
              <th class="text-right">T·ªïng ti·ªÅn</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </main>
  </div>

  <!-- Modal chi ti·∫øt ƒë∆°n h√†ng -->
  <div id="orderModal" class="modal hidden">
    <div class="modal-overlay" onclick="closeModal()"></div>
    <div class="modal-content">
      <button class="modal-close" onclick="closeModal()">√ó</button>
      <div class="modal-inner">
        <div class="card">
          <div class="card-content">
            <div class="modal-header">
              <h1>M√£: </h1>
              <div class="modal-meta">
                <span>Ng√†y ƒë·∫∑t <strong></strong></span>
                <div class="modal-status">
                  <div class="circle success"></div>
                  <span class="status-text"></span>
                </div>
              </div>
            </div>
            <div class="products"></div>
            <div class="delivery">
              <h3>Giao h√†ng</h3>
              <p>ƒê·ªãa ch·ªâ: </p>
            </div>
            <hr class="separator" />
            <div class="summary">
              <h3>T·ªïng thanh to√°n</h3>
              <div class="row"><span>Gi√° g·ªëc</span><span></span></div>
              <div class="row"><span>Gi·∫£m gi√°</span><span>0ƒë</span></div>
              <div class="row"><span>Ph√≠ giao h√†ng</span><span>0ƒë</span></div>
              <hr class="separator" />
              <div class="row total"><span>T·ªïng c·ªông</span><span></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="footer-placeholder"></div>

  <script>
    // Check authentication on page load
    document.addEventListener('DOMContentLoaded', function() {
        // The main logic is now in myOrder.js
        console.log('üì± MyOrder HTML loaded');
        
        // Check if user is authenticated
        if (!window.AuthManager || !window.AuthManager.isAuthenticated()) {
            console.warn('‚ö†Ô∏è User not authenticated, redirecting to login');
            window.location.href = 'login.html';
        return;
      }

        // Show loading message while myOrder.js loads the data
        const tbody = document.querySelector('.order-table tbody');
        if (tbody) {
            tbody.innerHTML = `
                <tr>
                    <td colspan="6" class="text-center py-4">
                        <div class="flex items-center justify-center gap-2">
                            <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"></div>
                            <span class="text-gray-500">ƒêang t·∫£i ƒë∆°n h√†ng...</span>
            </div>
                    </td>
                </tr>
        `;
        }
    });
  </script>
</body>

</html>